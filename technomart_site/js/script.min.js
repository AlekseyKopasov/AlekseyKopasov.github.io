var feedback=document.querySelector(".modal-write-us"),modalMap=document.querySelector(".modal-map"),modalFeedback=document.querySelector(".modal-feedback"),modal=document.querySelector(".modal"),closeFeedback=document.querySelector(".modal-close"),userName=document.querySelector("#name"),userMail=document.querySelector("#mail"),form=document.querySelector(".feedback-form"),openMap=document.querySelector(".modal-open-map"),addToBasket=(modalMap=document.querySelector(".modal-map"),document.querySelectorAll(".btn-buy")),modalPurchase=document.querySelector(".purchase"),cart=document.querySelector(".user-panel__link-cart"),productsCount=0,isStorageSupport=!0,storageUserName="",slides=document.querySelectorAll(".offer-slide"),countSlide=slides.length,nextSlide=document.querySelector(".slider-arrow-right"),previousSlide=document.querySelector(".slider-arrow-left"),dotSlide=document.querySelectorAll(".slide-indicators"),currentSlide=0,tabItem=document.querySelectorAll(".services-item"),tabContent=document.querySelectorAll(".tab-content");if(feedback){try{storageUserName=localStorage.getItem("userName")}catch(e){isStorageSupport=!1}feedback.addEventListener("click",function(e){e.preventDefault(),modalFeedback.classList.add("modal-show"),userName.focus()}),storageUserName?userName.value=storageUserName:userName.focus(),closeFeedback.addEventListener("click",function(e){e.preventDefault(),modal.classList.remove("modal-show"),modal.classList.remove("modal-error")}),form.addEventListener("submit",function(e){userName.value&&userMail.value?isStorageSupport&&(localStorage.setItem("userName",userName.Value),localStorage.setItem("userMail",userMail.Value)):(e.preventDefault(),modal.classList.remove("modal-error"),modal.offsetWidth=modal.offsetWidth,modal.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&modal.classList.contains("modal-show")&&(e.preventDefault(),modal.classList.remove("modal-show"),modal.classList.remove("modal-error"))})}if(modalMap){var mapClose=modalMap.querySelector(".modal-close");openMap.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.add("modal-show-map")}),mapClose.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.remove("modal-show-map")}),window.addEventListener("keydown",function(e){27===e.keyCode&&modalMap.classList.contains("modal-show-map")&&(e.preventDefault(),modalMap.classList.remove("modal-show-map"))})}if(modalPurchase){for(var purchaseClose=modalPurchase.querySelector(".modal-close"),i=0;i<addToBasket.length;i++)addToBasket[i].addEventListener("click",function(e){e.preventDefault(),modalPurchase.classList.add("modal-show-purchase"),productsCount++,cart.innerHTML="Корзина: "+productsCount,cart.classList.add("basket-full")});purchaseClose.addEventListener("click",function(e){e.preventDefault(),modalPurchase.classList.remove("modal-show-purchase")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),modalPurchase.classList.contains("modal-show-purchase")&&modalPurchase.classList.remove("modal-show-purchase"))})}if(slides.length>0){function showSlide(e){for(var t=0;t<countSlide;t++)slides[t].classList.remove("offer-slide-active"),dotSlide[t].classList.add("slide-indicators-current");slides[e].classList.add("offer-slide-active"),dotSlide[e].classList.remove("slide-indicators-current")}nextSlide.addEventListener("click",function(e){currentSlide<countSlide-1&&(e.preventDefault(),showSlide(currentSlide+=1))}),previousSlide.addEventListener("click",function(e){currentSlide>0&&(e.preventDefault(),showSlide(currentSlide-=1))})}if(tabContent.length>0)for(i=0;i<tabItem.length;++i)tabItem[i].addEventListener("click",function(e){for(e.preventDefault(e),j=0;j<tabItem.length;++j)tabItem[j].classList.remove("services-item-selected"),tabContent[j].classList.remove("tab-content-active");for(h=0;h<tabItem.length;++h)tabItem[h]==this&&(tabItem[h].classList.add("services-item-selected"),tabContent[h].classList.add("tab-content-active"))});
